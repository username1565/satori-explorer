/*!
 * Satori - Satori v1.2.0 (https://Satori.gold)
 * Copyright 2020-2020 The Satori Developers
 * Licensed under MIT (https://github.com/uwxpro/Satori-explorer/blob/master/LICENSE)
 */

!function(t){let e,n,a;t((function(){currentPage="payment";let n=setInterval((function(){appReady&&(e=t.urlParam("hash"),t.updateText("payment-id",e),t.getTransactions(),clearInterval(n))}),10)})),t.getTransactions=function(){n&&n.abort(),a=t.parseJSON(sessionStorage.getItem("txsByPaymentId")),a?t.renderPaymentTransactions(a):n=t.ajax({url:api+"/json_rpc",method:"POST",data:JSON.stringify({jsonrpc:"2.0",id:"paymentId",method:"k_transactions_by_payment_id",params:{payment_id:e}}),dataType:"json",cache:"false",success:function(e){let n=e.result.transactions;t.renderPaymentTransactions(n)}}),sessionStorage.removeItem("txsByPaymentId")},t.renderPaymentTransactions=function(e){let n=t("#transactions-rows");for(let a=0;a<e.length;a++){let s=e[a],r=JSON.stringify(s),o=document.getElementById("transactionRow"+s.hash);if(o&&o.getAttribute("data-json")!==r)t(o).replaceWith(t.getPaymentTransactionRowElement(s,r));else if(!o){let e=t.getPaymentTransactionRowElement(s,r);n.append(e)}}},t.getPaymentTransactionRowElement=function(e,n){let a=document.createElement("tr");return a.setAttribute("data-json",n),a.setAttribute("data-hash",e.hash),a.setAttribute("id","transactionRow"+e.hash),a.innerHTML=t.getPaymentTransactionCells(e),a},t.getPaymentTransactionCells=function(e){return'<th scope="row">'+t.formatPaymentLink(e.hash)+"</th><td>"+t.getReadableCoins(e.fee,4,!0)+"</td><td>"+t.getReadableCoins(e.amount_out,4,!0)+"</td><td>"+t.localizeNumber(e.size)+"</td>"}}(jQuery);
